<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake</title>
    <style>
        body{
            background: #666;
            text-align: center;
            margin: 60px 0 0 0;
        }
        canvas{
            border: solid 6px white;
            background: cornflowerblue;
        }
    </style>
</head>
<body>
    <canvas width="500" height="500"></canvas>
    <script>
        const INTERVALO = 80;
        const NUM = 10;
        const DIRECCION = {
            A:[-1,0],
            D:[1,0],
            S:[0,1],
            W:[0,-1],
            a:[-1,0],
            d:[1,0],
            s:[0,1],
            w:[0,-1],
            ArrowDown: [0,1],
            ArrowUp: [0,-1],
            ArrowRight: [1,0],
            ArrowLeft: [-1,0]
        }
        let controls = {direccion:{x:1, y:0}, snake:[{x:0, y:0}]}
        let movimiento
        //referencio el canvas en js
        let papel = document.querySelector("canvas");
        //contexto de canvas
        let ctx = papel.getContext("2d");
        
        let loop = () =>{
            const HEAD = controls.snake[0]
            let dx = controls.direccion.x;
            let dy = controls.direccion.y;
            HEAD.x += dx;
            HEAD.y += dy;
            requestAnimationFrame(dibujar)
            setTimeout(loop, INTERVALO)
        }
        document.onkeydown = (e) =>{
            movimiento = DIRECCION [e.key]
            const [x, y] = movimiento
            if (-x !== controls.direccion.x && -y !== controls.direccion.y){
            controls.direccion.x = x;
            controls.direccion.y = y;
            }
        }
        let dibujar = (color) =>{
        //Borra el canvas
            ctx.clearRect(0,0,500,500)
        //Indico el color del dibujo a crear
            ctx.fillStyle = "green"
            const HEAD = controls.snake [0]
        //Creo rectangulo (posicionX, posicionY, Ancho, Alto)
            ctx.fillRect(HEAD.x*NUM,HEAD.y*NUM,NUM,NUM)
        }

        //Cuando el documento carga, llamo a loop
        window.onload = () =>{
        // loop()
        }
    </script>
</body>
</html>
